<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>PDF URL 保存示例</title>
<style>
    body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
    }
    .container {
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
        color: #333;
        text-align: center;
        margin-bottom: 30px;
    }
    .input-group {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
    }
    input[type="text"] {
        flex: 1;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
    }
    input[type="text"]:focus {
        outline: none;
        border-color: #007bff;
    }
    button {
        padding: 12px 24px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s;
    }
    button:hover {
        background-color: #0056b3;
    }
    button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
    }
    #result {
        margin-top: 20px;
        padding: 15px;
        border-radius: 4px;
        font-weight: bold;
    }
    .success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }
    .error {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
    }
    .info {
        background-color: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
    }
    .loading {
        background-color: #fff3cd;
        color: #856404;
        border: 1px solid #ffeaa7;
    }
</style>
</head>
<body>
<div class="container">
    <h1>PDF URL 保存服务</h1>
    <p>请输入您想要保存的 PDF 文件链接，系统将验证该链接的有效性并保存。</p>

    <div class="input-group">
        <input type="text" id="pdfUrl" size="80" placeholder="https://arxiv.org/pdf/2508.21058 或其他 PDF 链接">
        <button id="sendBtn">发送</button>
    </div>

    <div id="result"></div>
</div>

<script>
document.getElementById('sendBtn').addEventListener('click', async () => {
    const url = document.getElementById('pdfUrl').value.trim();
    const resultDiv = document.getElementById('result');
    const sendBtn = document.getElementById('sendBtn');

    if (!url) {
        resultDiv.textContent = '请输入 URL';
        resultDiv.className = 'error';
        return;
    }

    // 显示加载状态
    sendBtn.disabled = true;
    sendBtn.textContent = '验证中...';
    resultDiv.textContent = '正在验证 PDF 链接，请稍候...';
    resultDiv.className = 'loading';

    try {
        const response = await fetch('/save-pdf-url', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ pdfUrl: url })
        });

        const data = await response.json();
        resultDiv.textContent = data.message;

        // 根据返回消息设置样式
        if (data.message.includes('成功')) {
            resultDiv.className = 'success';
            // 清空输入框
            document.getElementById('pdfUrl').value = '';
        } else {
            resultDiv.className = 'error';
        }
    } catch (err) {
        console.error(err);
        resultDiv.textContent = '请求失败，请稍后再试';
        resultDiv.className = 'error';
    } finally {
        // 恢复按钮状态
        sendBtn.disabled = false;
        sendBtn.textContent = '发送';
    }
});

// 支持 Enter 键提交
document.getElementById('pdfUrl').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        document.getElementById('sendBtn').click();
    }
});
</script>
</body>
</html>